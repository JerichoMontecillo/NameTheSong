let debutSongList = [["Tim McGraw", "Just a boy in a Chevy truck That had a tendency of getting stuck"],
                     ["Picture To Burn", "So watch me strike a match on all my wasted time"],
                     ["Teardrops On My Guitar", "He's the song in the car I keep singing, don't know why I do"],
                     ["A Place In This World", "Could you tell me what more do I need And tomorrow's just a mystery, oh yeah"],
                     ["Cold As You", "And when you take You take the very best of me"],
                     ["The Outside", "How can I ever try to be better? Nobody ever let's me in"],
                     ["Tied Together With A Smile", "I guess it's true that love was all you wanted 'Cause you're givin' it away like it's extra change"],
                     ["Stay Beautiful", "And when you find everything you've looked for I hope your love leads you back to my door"],
                     ["Should've Said No", "And I should've been there In the back of your mind"],
                     ["Mary's Song (Oh My My My)", "We were sitting at our favorite spot in town And you looked at me, got down on one knee"],
                     ["Our Song", "I was ridin' shotgun with my hair undone In the front seat of his car"],
                     ["I'm Only Me When I'm With You", "Well, you drive me crazy half the time The other half I'm only trying"],
                     ["Invisible", "There's a fire inside of you That can't help but shine through"],
                     ["A Perfectly Good Heart", "Maybe I should've seen the signs, should've read the writing on the wall"]]

let fearlessSongList = [["Fearless", "You put your eyes on me In this moment now capture it, remember it"],
                        ["Fifteen", "You say hi to your friends you ain't seen in awhile Try and stay out of everybody's way"],
                        ["Love Story", "Romeo, save me, they're tryna tell me how to feel This love is difficult, but it's real"],
                        ["Hey Stephen", "Can't help it if I wanna kiss you in the rain, so Come feel this magic I've been feeling since I met you"],
                        ["White Horse", "Something a man just got to do I wish you could change my mind"],
                        ["You Belong With Me", "And you've got a smile That can light up this whole town"],
                        ["Breathe", "Never wanted this, never wanna see you hurt Every little bump in the road I tried to swerve"],
                        ["Tell Me Why", "I'm sick and tired of your reasons I got no one to believe in"],
                        ["You're Not Sorry", "Could've loved you all my life If you hadn't left me waiting in the cold"],
                        ["The Way I Loved You", "And It's 2 a.m. and I'm cursing your name"],
                        ["Forever & Always", "Did I say something way too honest, made you run and hide Like a scared little boy"],
                        ["The Best Day", "And we talk and window shop 'Till I forgotten all their names"],
                        ["Change", "These walls that they put up to hold us back will fall down"],
                        ["Jump Then Fall", "I like the way I can't keep my focus I watch you talk, you didn't notice"],
                        ["Untouchable", "It's like a million little stars spelling out your name"],
                        ["Come In With The Rain", "I'll leave my window open 'Cause I'm too tired at night to call your name, oh"],
                        ["Superstar", "When my world wakes up today You'll be in another town"],
                        ["The Other Side Of The Door", "Wait there in the pourin' rain, come back for more And don't you leave, 'cause I know"],
                        ["Today Was A Fairytale", "Time slows down Whenever you're around, yeah"],
                        ["You All Over Me", "And I lived, and I learned Had you, got burned"],
                        ["Mr. Perfectly Fine", "'Cause I hear he's got his arm 'round a brand-new girl"],
                        ["We Were Happy", "We used to walk along the streets When the porch lights were shinin' bright"],
                        ["That's When", "And you said, 'Honestly When you were gone, did you ever think of me?'"],
                        ["Don't You", "So I walk outta here tonight Try to go on with my life"],
                        ["Bye Bye Baby", "Then the here and the now floods in Feels like I'm becoming a part of your past"],
                        ["If This Was A Movie", "I know people change and these things happen But I remember how it was back then"]]

let speakNowSongList = [["Mine", "You were in college, working part-time waiting tables"],
                        ["Sparks Fly", "The way you move is like a full on rainstorm And I'm a house of cards"],
                        ["Back To December", "It turns out freedom ain't nothin' but missin' you"],
                        ["Speak Now", "I'll meet you when you're out of the church at the back door"],
                        ["Dear John", "You are an expert at sorry and keeping the lines blurry"],
                        ["Mean", "Someday, I'll be big enough so you can't hit me"],
                        ["The Story Of Us", "This is looking like a contest Of who can act like they care less"],
                        ["Never Grow Up", "Take pictures in your mind of your childhood room"],
                        ["Enchanted", "I'm wonderstruck, blushing all the way home"],
                        ["Better Than Revenge", "She's not a saint and she's not what you think She's an actress, whoa"],
                        ["Innocent", "Wasn't it easier in your firefly-catchin' days?"]
                        ["Haunted", "Stood there and watched you walk away From everything we had"],
                        ["Last Kiss", "And I'd roll my eyes and then you'd pull me in I'm not much for dancing, but for you, I did"],
                        ["Long Live", "When they point to the pictures Please tell them my name"],
                        ["Ours", "So don't you worry your pretty, little mind People throw rocks at things that shine"],
                        ["Superman", "'Cause I've loved you from the very first day"],
                        ["Electric Touch", "All I know is this could either break my heart or bring it back to life"],
                        ["When Emma Falls In Love", "And she's the kind of book that you can't put down Like if Cleopatra grew up in a small town"],
                        ["I Can See You", "They keep watchful eyes on us So it's best that we move fast and keep quiet"],
                        ["Castles Crumbling", "Their faith was strong, but I pushed it too far I held that grudge 'til it tore me apart"],
                        ["Foolish One", "Stop checkin' your mailbox for confessions of love"],
                        ["Timeless", "I would've read your love letters every single night And prayed to God you'd be comin' home all right"]]
    
let redSongList = [["State Of Grace", "We learn to live with the pain Mosaic broken hearts"],
                   ["Red", "Losing him was blue, like I'd never known Missing him was dark gray, all alone"],
                   ["Treacherous", "And I'd be smart to walk away But you're quicksand"],
                   ["I Knew You Were Trouble", "Now I'm lyin' on the cold hard ground"],
                   ["All Too Well", "And you call me up again just to break me like a promise"],
                   ["22", "It seems like one of those nights We ditch the whole scene and end up dreaming"],
                   ["I Almost Do", "And I just wanna tell you It takes everything in me not to call you"],
                   ["We Are Never Ever Getting Back Together", "I'm really gonna miss you picking fights And me falling for it screaming that I'm right"],
                   ["Stay Stay Stay", "You took the time to memorize me My fears, my hopes and dreams"],
                   ["The Last Time", "You wear your best apology But I was there to watch you leave"],
                   ["Holy Ground", "Took off faster than a green light, go Yeah, you skip the conversation when you already know"],
                   ["Sad Beautiful Tragic", "Kiss me, try to fix it Could you just try to listen?"],
                   ["The Lucky One", "And your secrets end up splashed on the news front page"],
                   ["Everything Has Changed", "But I'll take 'em down, take 'em down And open up the door for you"],
                   ["Starlight", "He was tryna to skip rocks on the ocean saying to me"],
                   ["Begin Again", "And you throw your head back laughing Like a little kid"],
                   ["The Moment I Knew", "And it was like slow motion Standing there in my party dress"],
                   ["Come Back...Be Here", "One last kiss, then catch your flight Right when I was just about to fall"],
                   ["Girl At Home", "I just wanna make sure You understand perfectly, you're the kind of man who makes me sad"],
                   ["Ronan", "What if I'm standing in your closet Trying to talk to you?"],
                   ["Better Man", "I hold onto this pride because these days it's all I have And I gave to you my best and we both know you can't say that"],
                   ["Nothing New", "I've had too much to drink tonight And I know it's sad, but this is what I think about"],
                   ["Babe", "I'm here on the kitchen floor You call, but I won't hear it"],
                   ["Message In A Bottle", "Feelin' like a face in the crowd I'm reachin' for you, terrified"],
                   ["I Bet You Think About Me", "Oh, they sit around talkin' 'bout the meaning of life And the book that just saved 'em that I hadn't heard of"],
                   ["Forever Winter", "I'd fall to pieces on the floor If you weren't around"],
                   ["Run", "I could see this view a hundred times Pale blue sky reflected in your eyes"],
                   ["The Very First Night", "'Cause they don't know about the night in the hotel They weren't ridin' in the car when we both fell"]]

let nineteenEightyNineSongList = [["Welcome to New York", "Walkin' through a crowd, the village is aglow Kaleidoscope of loud heartbeats under coats"],
                                  ["Blank Space", "I could show you incredible things Magic, madness, heaven, sin"],
                                  ["Style", "Know exactly where it leads, but I Watch us go 'round and 'round each time"],
                                  ["Out of the Woods", "The rest of the world was black and white But we were in screaming color"],
                                  ["All You Had to do was Stay", "The more I think about it now, the less I know All I know is that you drove us off the road"],
                                  ["Shake it Off", "And the dirty, dirty cheats of the world You could've been gettin' down to this sick beat"],
                                  ["I Wish You Would", "I wish you knew that I'd never forget you as long as I'd live"],
                                  ["Bad Blood", "Did you have to do this? I was thinking that you could be trusted"],
                                  ["Wildest Dreams", "Say you'll remember me Standing in a nice dress Staring at the sunset, babe"],
                                  ["How You Get the Girl", "I want you for worse or for better I would wait for ever and ever"],
                                  ["This Love", "Lantern, burning Flickered in the night, only you"],
                                  ["I Know Places", "They are the hunters, we are the foxes And we run"],
                                  ["Clean", "There was nothing left to do When the butterflies turned to dust that covered my whole room"],
                                  ["Wonderland", "Didn't they tell us don't rush into things? Didn't you flash your green eyes at me?"],
                                  ["You Are in Love", "You two are dancing in a snow globe, 'round and 'round And he keeps the picture of you in his office downtown"],
                                  ["New Romantics", "'Cause baby, I could build a castle Out of all the bricks they threw at me"],
                                  ['"Slut!"', "Got lovestruck, went straight to my head Got lovesick, all over my bed"],
                                  ["Say Don't Go", "Now I'm pacin' on shaky ground Strike a match, then you blow it out"],
                                  ["Now That We Don't Talk", "I call my mom, she said that it was for the best Remind myself the more I gave, you'd want me less"],
                                  ["Suburban Legends", "I had the fantasy that maybe our mismatched star signs would surprise the whole school"],
                                  ["Is It Over Now?", "Let's fast forward to three hundred takeout coffees later"],
                                  ["Sweeter Than Fiction", "There you'll stand, ten feet tall I will say I knew it all along"]]
                        
let reputationSongList = [["...Ready For It?", "Knew he was a killer first time that I saw him Wonder how many girls he had loved and left haunted"],
                          ["End Game", "I hit you like, 'Bang' We tried to forget it, but we just couldn't"],
                          ["I Did Something Bad", "I can feel the flames on my skin Crimson red paint on my lips"],
                          ["Don't Blame Me", "Oh Lord, save me, my drug is my baby I'll be usin' for the rest of my life"],
                          ["Delicate", "Dive bar on the East Side, where you at? Phone lights up my nightstand in the black"],
                          ["Look What You Made Me Do", "I got a list of names, and yours is in red, underlined I check it once, then I check it twice, oh!"],
                          ["So It Goes...", "And all the pieces fall, right into place Getting caught up in a moment"],
                          ["Gorgeous", "You should take it as a compliment That I'm talking to everyone here but you"],
                          ["Getaway Car", "It was the great escape, the prison break The light of freedom on my face"],
                          ["King of My Heart", "Up on the roof with a school girl crush Drinking beer out of plastic cups"],
                          ["Dancing With Our Hands Tied", "I could've spent forever with your hands in my pockets Picture of your face in an invisible locket"],
                          ["Dress", "Say my name and everything just stops I don't want you like a best friend"],
                          ["This is Why We Can't Have Nice Things", "It was so nice being friends again There I was, giving you a second chance"],
                          ["Call it What You Want", "All my flowers grew back as thorns Windows boarded up after the storm"],
                          ["New Year's Day", "Please don't ever become a stranger Whose laugh I could recognize anywhere"]]

let loverSongList = [["I Forgot That You Existed", "Would've been right there, front row Even if nobody came to your show"],
                     ["Cruel Summer", "So cut the headlights, summer's a knife I'm always waiting for you just to cut to the bone"],
                     ["Lover", "We could let our friends crash in the living room This is our place, we make the call"],
                     ["The Man", "I'd be a fearless leader I'd be an alpha type"],
                     ["The Archer", "I wake in the night, I pace like a ghost The room is on fire, invisible smoke"],
                     ["I Think He Knows", "He got my heartbeat Skipping down 16th Avenue"],
                     ["Miss Americana & The Heartbreak Prince", "My team is losing, battered and bruising I see the high fives between the bad guys"],
                     ["Paper Rings", "In the winter, in the icy outdoor pool When you jumped in first, I went in too"],
                     ["Corneila Street", "Windows swung right open, autumn air Jacket 'round my shoulders is yours"],
                     ["Death By A Thousand Cuts", "Gave up on me like I was a bad drug Now I'm searching for signs in a haunted club"],
                     ["London Boy", "And you know I love Springsteen, faded blue jeans, Tennessee whiskey"],
                     ["Soon You'll Get Better", "I know delusion when I see it in the mirror You like the nicer nurses, you make the best of a bad deal"],
                     ["False God", "And you can't talk to me when I'm like this Daring you to leave me just so I can try and scare you"],
                     ["You Need To Calm Down", "You are somebody that we don't know But you're coming at my friends like a missile"],
                     ["Afterglow", "This ultraviolet morning light below Tells me this love is worth the fight, oh"],
                     ["ME!", "But one of these things is not like the others Like a rainbow with all of the colors"],
                     ["It's Nice To Have A Friend", "Light pink sky up on the roof Sun sinks down, no curfew"],
                     ["Daylight", "Luck of the draw only draws the unlucky And so I became the butt of the joke"]]
            
let folkloreSongList = [["the 1", "But we were something, don't you think so? Roaring 20s, tossing pennies in the pool"],
                        ["cardigan", "When you are young, they assume you know nothin'"],
                        ["the last great american dynasty", "They say she was seen on occasion Pacing the rocks, staring out at the midnight sea"],
                        ["exile", "You're not my homeland anymore So what am I defending now?"],
                        ["my tears ricochet", "Some to throw, some to make a diamond ring"],
                        ["mirrorball", "I'm still on that tightrope I'm still trying everything to get you laughing at me"],
                        ["seven", "And I've been meaning to tell you I think your house is haunted"],
                        ["august", "Will you call when you're back at school? I remember thinkin' I had you"],
                        ["this is me trying", "I was so ahead of the curve, the curve became a sphere"],
                        ["illicit affairs", "Look at this godforsaken mess that you made me"],
                        ["invisible string", "Something wrapped all of my past mistakes in barbed wire"],
                        ["mad woman", "Now I breathe flames each time I talk My cannons all firin' at your yacht"],
                        ["epiphany", "Just one single glimpse of relief To make some sense of what you've seen"],
                        ["betty", "I was walking home on broken cobblestones"],
                        ["peace", "But there's robbers to the east, clowns to the west I'd give you my sunshine, give you my best"],
                        ["hoax", "You knew it still hurts underneath my scars From when they pulled me apart"],
                        ["the lakes", "I want to watch wisteria grow right over my bare feet"]]
                
let evermoreSongList = [["willow", "As if you were a mythical thing Like you were a trophy or a champion ring"],
                        ["champagne problems", "How evergreen, our group of friends Don't think we'll say that word again"],
                        ["gold rush", "And then it fades into the gray of my day old tea 'Cause you know it could never be"],
                        ["'tis the damn season", "I parked my car right between the Methodist And the school that used to be ours"],
                        ["tolerate it", "I greet you with a battle hero's welcome"],
                        ["no body, no crime", "Her husband's acting different and it smells like infidelity"],
                        ["happiness", "Past the blood and bruise Past the curses and cries"],
                        ["dorothea", "The stars in your eyes Shined brighter in Tupelo"],
                        ["coney island", "Do you miss the rogue Who coaxed you into paradise and left you there?"],
                        ["ivy", "I'd meet you where the spirit meets the bones In a faith forgotten land"],
                        ["cowboy like me", "Now you hang from my lips Like the Gardens of Babylon"],
                        ["long story short", "When I dropped my sword I threw it in the bushes and knocked on your door"],
                        ["marjorie", "Never be so polite, you forget your power Never wield such power, you forget to be polite"],
                        ["closure", "Don't treat me like some situation that needs to be handled"],
                        ["evermore", "And I was catching my breath Floors of a cabin creaking under my step"],
                        ["right where you left me", "Did you ever hear about the girl who got frozen?"],
                        ["it's time to go", "Fifteen years, fifteen million tears Begging 'til my knees bled"]]

let midnightsSongList = [["Lavender Haze", "All they keep askin' me Is if I'm gonna be your bride"],
                         ["Maroon", "When the silence came, we were shaking blind and hazy How the hell did we lose sight of us again?"],
                         ["Anti-Hero", "I should not be left to my own devices They come with prices and vices"],
                         ["Snow On The Beach", "This scene feels like what I once saw on a screen I searched aurora borealis green"],
                         ["You're On Your Own, Kid", "I hosted parties and starved my body Like I'd be saved by a perfect kiss"],
                         ["Midnight Rain", "And he never thinks of me Except when I'm on TV"],
                         ["Question...?", "And every single one of your friends was Making fun of you"],
                         ["Vigilante Shit", "She had the envelope, where you think she got it from?"],
                         ["Bejeweled", "Did all the extra credit, then got graded on a curve I think it's time to teach some lessons"],
                         ["Labyrinth", "You know how much I hate that everybody just expects me to bounce back"],
                         ["Karma", "Don't you know that cash ain't the only price? It's coming back around"],
                         ["Sweet Nothing", "Industry disruptors and soul deconstructors And smooth-talking hucksters out glad-handing each other"],
                         ["Mastermind", "I laid the groundwork and then, just like clockwork The dominoes cascaded in a line"],
                         ["The Great War", "You said I have to trust more freely But diesel is desire, you were playin' with fire"],
                         ["Bigger Than The Whole Sky", "'Cause it's all over, it's not meant to be So I'll say words I don't believe"],
                         ["Paris", "Privacy sign on the door And on my page and on the whole world"],
                         ["High Infidelity", "Do I really have to chart the constellations in his eyes?"],
                         ["Glitch", "I thought we had no chance And that's romance, let's dance"],
                         ["Would've, Could've, Should've", "I would've stayed on my knees And I damn sure never would've danced with the devil"],
                         ["Dear Reader", "Never take advice from someone who's falling apart"],
                         ["Hits Different", "I trace the evidence, make it make some sense Why the wound is still bleedin'"]]


// Runs when quiz_page.html is loaded
window.onload = function() {

    // Prevents clicking on the screen. Used for avoiding changing score by answering questions early
    let freezeClick = false
    document.addEventListener("click", e => {
        if (freezeClick) {
            e.stopPropagation()
            e.preventDefault()
        }
    }, true)

    // References to html elements
    const ask = document.getElementById('question')
    const first = document.getElementById('option1')
    const second = document.getElementById('option2')
    const third = document.getElementById('option3')
    const fourth = document.getElementById('option4')
    const scoreboard = document.getElementById('score')

    // Reference to the song and question for use in logic when checking if an answer is correct
    var currentSong = null

    // Reference to the list with all the songs
    var songList = []

    // Obtained from front_page.js in local storage
    var albumName = localStorage.getItem("albumName")

    // Used for changing html contents in a loop
    var numbers = [first, second, third, fourth]

    // Keep track of total questions
    var flag = 0

    // Grabs the correct album that user chooses
    if (albumName == "debut") {
        songList = Array.from(debutSongList)
    } else if (albumName == "fearless") {
        songList = Array.from(fearlessSongList)
    } else if (albumName == "speakNow") {
        songList = Array.from(speakNowSongList)
    } else if (albumName == "red") {
        songList = Array.from(redSongList)
    } else if (albumName == "nineteenEightyNine") {
        songList = Array.from(nineteenEightyNineSongList)
    } else if (albumName == "reputation") {
        songList = Array.from(reputationSongList)
    } else if (albumName == "lover") {
        songList = Array.from(loverSongList)
    } else if (albumName == "folklore") {
        songList = Array.from(folkloreSongList)
    } else if (albumName == "evermore") {
        songList = Array.from(evermoreSongList)
    } else if (albumName == "midnights") {
        songList = Array.from(midnightsSongList)
    } else {
        return 0;
    }

    // Clickable options for questions

    first.addEventListener('click', function() {
        if(first.textContent == currentSong[0]) {
            correctChange(first)
            console.log('Correct')
            changeScore(true, scoreboard)
        } else {
            wrongChange(first)
            console.log('Wrong')
            changeScore(false, scoreboard)
        }
    })

    second.addEventListener('click', function() {
        if(second.textContent == currentSong[0]) {
            correctChange(second)
            console.log('Correct')
            changeScore(true, scoreboard)
        } else {
            wrongChange(second)
            console.log('Wrong')
            changeScore(false, scoreboard)
        }
    })

    third.addEventListener('click', function() {
        if(third.textContent == currentSong[0]) {
            correctChange(third)
            console.log('Correct')
            changeScore(true, scoreboard)
        } else {
            wrongChange(third)
            console.log('Wrong')
            changeScore(false, scoreboard)
        }
    })

    fourth.addEventListener('click', function() {
        if(fourth.textContent == currentSong[0]) {
            correctChange(fourth)
            console.log('Correct')
            changeScore(true, scoreboard)
        } else {
            wrongChange(fourth)
            console.log('Wrong')
            changeScore(false, scoreboard)
        }
    })

    // Runs the first instance of the question when page is loaded
    runQuestion()

    // Changes the html contents of the questions, and each answer option
    function runQuestion() {
        albums = Array.from(songList)
        songs = []

        for (i = 0; i < 4; i++) {
            temp = albums[Math.floor(Math.random() * albums.length)]
            if (songs.includes(temp) || temp == undefined) {
                do {
                    temp = albums[Math.floor(Math.random() * albums.length)]
                } while (songs.includes(temp) || temp == undefined)
            }
            index = albums.indexOf(temp)
            songs.push(temp)
            albums.splice(index, 1)
        }

        question = songs[Math.floor(Math.random() * songs.length)]
        currentSong = question

        for (i=0; i < 4; i++) {
            temp = songs[Math.floor(Math.random() * songs.length)]
            if (temp == undefined) {
                do {
                temp = songs[Math.floor(Math.random() * songs.length)]
                } while (temp == undefined)
            }
            index = songs.indexOf(temp)
            numbers[i].innerHTML = temp[0]
            songs.splice(index, 1)
        }

        ask.innerHTML = question[1]
        flag += 1

        index = songList.indexOf(question)
        songList.splice(index, 1)

        // For bug testing with right or wrong answers
        console.log("Answer: " + question[0])

        // Shows the options for each question
        let options = [first.textContent, second.textContent, third.textContent, fourth.textContent]
        console.log("Options: " + options)
    }

    // Checks if the amount of questions exceeds the total per quiz (5 questions each quiz), and goes to the score page when 5 questions have been answered
    function checkNum() {
        if (flag > 4) {
            window.location.href = "score.html"
            return false
        }
        return true
    }

    // Changes the html contents of the score
    function changeScore(isCorrect, scoreboard) {
        text = scoreboard.textContent
        correct = Number(text[7])
        total = Number(text[9]) + 1

        if (isCorrect) {
            correct += 1
            scoreboard.innerHTML = "Score: " + correct + "/" + total
        } else {
            scoreboard.innerHTML = "Score: " + correct + "/" + total
        }

        localStorage.setItem("localScore", correct)
    }

    // Pauses Program to show right or wrong
    function sleep(ms) {
        return new Promise(resolve => setTimeout(resolve, ms))
    }

    // Displays correct answer box
    async function correctChange(box) {
        freezeClick = true
        box.style.backgroundColor = "green"
        await sleep(1000)
        freezeClick = false
        box.style.backgroundColor = null
        if (checkNum()) {
            runQuestion()
        }
    }

    // Displays wrong answer box
    async function wrongChange(box) {
        freezeClick = true
        box.style.backgroundColor = "red"
        await sleep(1000)
        freezeClick = false
        box.style.backgroundColor = null
        if (checkNum()) {
            runQuestion()
        }
    }
}